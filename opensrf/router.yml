- name: Install OpenSRF Router Pre-Prereqs
  apt: 
    state: present
    name:
      - rust-all
      - cargo
- name: Checkout OpenSRF Router Repository
  git:
    repo: "{{osrf_router_git_repository}}"
    dest: "{{repo_base}}/opensrf-rs"
    depth: "{{osrf_router_clone_depth}}"
    version: "{{osrf_router_git_branch}}"
    force: "{{force_git_checkout}}"
  become: true
  become_user: opensrf
  when: perform_git_checkout
- name: Build And Install OpenSRF Router
  become: true
  shell: cargo install --bin router --root {{eg_install_path}} --path {{repo_base}}/opensrf-rs
